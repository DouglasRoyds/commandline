git config -l                                         List: it's all in .git/config and ~/.gitconfig
git config user.name
git config user.email                                 Display, just for this repository
git config --global user.email                        From ~/.gitconfig, rather than the repository .git/config
git config --global user.email username@server.fake   Write into ~/.gitconfig
git config --unset user.email                         Remove the repository-local setting (from .git/config)
                                                      All git commands can take -c before the verb
                                                          -c user.name='Douglas Royds'
                                                          -c user.email='douglas.royds@emailhost.com'

git init                                     Create a local git repository
git clone URL
git clone URL directory/
git pull                                     Update from remote repository (ie. fetch and merge)
                                                -r --rebase    Rebase local branch on top of the upstream branch
git remote -v                                List all remote repositories, complete with URLs
git remote show origin                       Even more detail
git remote add origin URL                    Hooks this local git repository to the remote repository at URL
git remote add shortname URL                 Shortname stands in for the URL in later fetches
git remote rename thisname thatname
git remote rm somename
git remote set-url origin URL                Change the URL (as opposed to adding a new one)
git branch -u origin/master                  Set the upstream branch to push on the new URL
git fetch shortname                          Pull into local repository without merging
git push                                     Push committed changes to the default remote server
git push origin master                       Push committed changes to the origin remote server, on branch master

git log -1
git log -n1 filename                         Limit the number of log entries listed
git log --name-status                        List affected files as well
git log --stat                               Git-style stats (files, lines changed)
git log --oneline                            One line per commit
git log --oneline --decorate                 With branch markers as well
git log -p                                   With diffs
git log commitsum -- filename                Starting with the given log entry (short object name)
git log here..there                          Just between the two commits
git log master..branch                       Commits made only on this branch
git log master..                             If we are on the branch
git log origin..                             Commits that are yet to be pushed
git log --diff-filter=D --summary            When was a file deleted?

git status
git add filename                             Stage changes to this file
git add -p                                   Interactively select which hunks are to be staged
git diff filename                            Unstaged mods only
git diff --cached                            Which changes are already staged?
git commit                                   Commit staged changes
git commit -v                                Show diffs in the commit editor
git commit filename -m"Comment"              Commit changes to this file, whether they are staged or not
git commit -am"Comment"                      Add and commit changes to all files that git knows about
git commit -m"Headline" -m"Content line"     Git doesn't see \n characters in the message as new lines
git commit --amend
git commit --amend -m"Comment"               Change the commit message of the most recent commit

git rm filename                              Delete
git rm --cached filename                     Delete from staging, but keep the working copy

git reset --soft commitsum                   Revert to this commit, but leave local changes staged
git reset --mixed commitsum                  Revert to this commit, remove from staging, but leave working copy intact
git reset --hard commitsum                   Revert to this commit, remove from staging, and undo working copy changes
git reset commitsum                             --mixed is the default
git reset filename                           Unstage a file, keeping local changes (default --mixed)
git reset --hard HEAD                        Revert everything to the most recent commit, undoing all working copy changes
git reset --hard HEAD~1                      Delete the last commit completely, undoing all working copy changes
git push --force                             Force the deletion up if you'd already pushed it, however,
                                             if others have pulled it, they will push it back up again. Better to use ...
git revert HEAD                              Generates the reverse commit
git show commitsum:filename                  Cat to stdout
git show branchname:filename

git checkout -- filename                     Revert local mods
git checkout commitsum filename              Roll file back to this commit
git checkout HEAD^ filename                  Roll file back to the parent of the HEAD: roll back by one
git checkout HEAD^2 filename                 Roll file back by two
git checkout HEAD^^ filename                 Roll file back by two
git checkout HEAD~2 filename                 Roll file back by two: only different to HEAD^^ when a commit has multiple parents
git checkout master filename                 Roll file forward to the HEAD of this branch
git checkout master^ filename                Roll file back to the parent of the HEAD of this branch
                                                --    Everything after this is a filename,
                                                      just in case there's a branch with this name

git stash                                    All local mods, including any staged files.
git stash list
git stash pop                                Reapply
git stash pop --index                        Restage previously staged files
git stash pop stash@{2}                      Reapply stash 2
git stash drop                               Ditch it
git stash branch branchname                  Branch from the original stashpoint, reapply the stash

git branch branchname                        Creates the branch without switching to it
git checkout branchname                      Note the potential ambiguity with filenames
                                                -f    Force: throw away local changes
git checkout -b newbranch                    Create and switch to the new branch in one go
git checkout --track remote/branchname       Makes this the default pull branch
git branch                                   List local branches
                                                -a    Both local and remote
                                                -v    With the commit sum and line for each branch as well
                                                -vv   With remote tracking branch, and ahead/behind
git branch --list pattern                    Pattern is a shell glob
git branch --list -r remote/pattern             -r    Remote branches
git branch --contains commitsum              Which (local) branch did this commit happen on?
                                                -r    Remote branches as well
git branch -m oldname newname                Rename (move)
git branch -m newname                        If you're already on the old branch
git branch -d branchname                     Delete (locally)
git push origin --delete branchname          Delete (remote)

                                             Oops, I committed on a detached HEAD
git checkout -b temp                         Switch to a temporary branch pointing at my unreferenced commit
git rebase master                            Bring my commits up to date
git checkout master
git merge temp                               This will fast-forward
git branch -d temp                           Done.

git rebase branchname                        Rebase the current branch off the head of the named branch
git rebase -i commitsum                      Recommit (ie. rebase) all changes after the given commit
                                             Need to git push --force after a rebase
                                                -i    Interactive, allows us to take an action on each commit as we go:
                                                         reword   Opens the editor to correct the commit message
                                                         edit     Drops back to the shell to change the files
                                                                  See https://www.git-scm.com/book/en/v2/Git-Tools-Rewriting-History

git tag                                      List all tags
git tag -a tagname -m"Message"                  -a    Annotated tag, ie. one that has a message
                                                      and that is useful to git describe.
git push origin tagname                      Tags are not pushed by default git push

cd repository1
git log --pretty=email --patch-with-stat --reverse --full-index --binary -- pathname > ~/history.patch
cd repository2
git am < ~/history.patch                     Copy named files from repository1 into repository2, complete with history

git format-patch commitsum                   Generate patch files for *every* commit from here up to the head
                                                -1    Just the one, thanks
git apply patchfile

